<div class="container">
    <div class="admin-header">
        <button class="back-button" routerLink="/">‚Üê</button>
        <div class="header-content">
            <h1>Painel Administrativo</h1>
            <p class="subtitle">Gerencie todos os empr√©stimos da biblioteca</p>
        </div>
        <div class="header-actions">
            <button class="btn-export" (click)="exportarDados()">üì• Exportar Dados</button>
            <button class="btn-refresh" (click)="carregarEmprestimos()" (click)="carregarEmprestimosAtrasados()">üîÑ
                Atualizar</button>
            <button class="btn-logout" (click)="logout()">üö™ Sair</button>
        </div>
    </div>

    <div class="stats-section">
        <div class="stat-card" (click)="exibirTabela()">
            <div class="stat-number">{{ emprestimos.length }}</div>
            <div class="stat-label">Total de Empr√©stimos Pendentes</div>
        </div>
        <div class="stat-card" (click)="exibirTabelaAtrasado()">
            <div class="stat-number">{{ emprestimosAtrasados.length }}</div>
            <div class="stat-label">Total de Empr√©stimos Atrasados</div>
        </div>
    </div>

    <div class="emprestimos-section" *ngIf="mostrarTabelaEmprestimos">
        <div class="section-header">
            <h2>Lista de Empr√©stimos Pendentes</h2>
            <span class="count-badge">{{ emprestimos.length }} empr√©stimo(s)</span>
        </div>

        @if (emprestimos && emprestimos.length == 0) {
        <div *ngIf="emprestimos.length === 0" class="empty-state">
            <div class="empty-icon">üìö</div>
            <p>Nenhum empr√©stimo encontrado</p>
            <p class="empty-subtitle">Use os filtros para buscar ou cadastre um novo empr√©stimo</p>
        </div>
        }
        @if (emprestimos && emprestimos.length > 0) {
        <div class="tabela-emprestimos-section">

            <table class="tabela-emprestimos">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Livro</th>
                        <th>Autor</th>
                        <th>Usu√°rio</th>
                        <th>WhatsApp</th>
                        <th>Retirada</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let e of emprestimos">
                        <td>{{ e.id }}</td>
                        <td>{{ e.livro }}</td>
                        <td>{{ e.autor }}</td>
                        <td>{{ e.nome }}</td>
                        <td>
                            <a [href]="'https://wa.me/' + e.celular" target="_blank">{{ e.celular }}</a>
                        </td>
                        <td>{{ e.retirada }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        }
    </div>
    
    <div class="emprestimos-section" *ngIf="mostrarTabelaEmprestimosAtrasado">
        <div class="section-header">
            <h2>Lista de Empr√©stimos Atrasados</h2>
            <span class="count-badge">{{ emprestimosAtrasados.length }} empr√©stimo(s)</span>
        </div>

        @if (emprestimosAtrasados && emprestimosAtrasados.length == 0) {
        <div *ngIf="emprestimosAtrasados.length === 0" class="empty-state">
            <div class="empty-icon">üìö</div>
            <p>Nenhum empr√©stimo encontrado</p>
            <p class="empty-subtitle">Use os filtros para buscar ou cadastre um novo empr√©stimo</p>
        </div>
        }
        @if (emprestimosAtrasados && emprestimosAtrasados.length > 0) {
        <div class="tabela-emprestimos-section">

            <table class="tabela-emprestimos">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Livro</th>
                        <th>Autor</th>
                        <th>Usu√°rio</th>
                        <th>WhatsApp</th>
                        <th>Retirada</th>
                    </tr>
                </thead>

                <tbody>
                    <tr *ngFor="let e of emprestimosAtrasados">
                        <td>{{ e.id }}</td>
                        <td>{{ e.livro }}</td>
                        <td>{{ e.autor }}</td>
                        <td>{{ e.nome }}</td>
                        <td>
                            <a [href]="'https://wa.me/' + e.celular" target="_blank">{{ e.celular }}</a>
                        </td>
                        <td>{{ e.retirada }}</td>
                    </tr>
                </tbody>
            </table>
        </div>
        }
    </div>
</div>